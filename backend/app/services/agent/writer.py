from app.models.agent import TrendReport, WritingMethod

class WriterAgent:
    async def write_script(self, trend: TrendReport, method: WritingMethod) -> str:
        """根据热点和方法论生成剧本"""
        # 模拟 LLM 生成过程
        script = f"""
# 剧名：《{trend.topic}》
# 核心梗：{trend.inspiration_points[0]}
# 使用方法论：{method.method_name}

【第1集】
【场景】 公园相亲角 日 外
【人物】 李秀兰(55岁，朴素)，林震天(60岁，保安制服，其实是首富)

(0-3s 黄金开场)
(李秀兰手里拿着一张皱巴巴的征婚启事，被一个浓妆艳抹的大妈推了一把)
王大妈：(尖酸) 就你这穷酸样，还想找有退休金的？也不撒泡尿照照！
李秀兰：(踉跄) 我...我只是想找个伴...

(3-15s 发展)
(林震天走上前，扶住李秀兰。他一身旧保安服，但眼神锐利)
林震天：大妹子，你没事吧？
王大妈：(鄙夷) 哟，捡破烂的配扫大街的，绝配啊！
林震天：(冷笑) 谁是破烂，还不一定呢。

(15-45s 冲突升级)
(王大妈炫耀自己的金手镯)
王大妈：看见没？我女婿送的！你们这种下等人一辈子没见过吧？
(林震天低头看了看手表，那是全球限量一块的百达翡丽)
林震天：(内心混响) 这种货色，也配在我面前炫富？

(45-60s 结尾钩子)
(一辆劳斯莱斯缓缓停在公园门口，司机恭敬地跑过来)
司机：(大喊) 董事长！那个几亿的合同...
(所有人都看向这边。林震天给司机使了个眼色)
林震天：(假装不认识) 认错人了吧？我就是个看大门的。
(李秀兰感激地看着林震天，王大妈一脸狐疑)
【本集完】 悬念：林震天如何继续隐瞒身份？王大妈会如何刁难？
"""
        return script
