# ShortPlay Agent - 智能短剧创作助手设计文档

## 1. 产品定义 (Product Definition)
ShortPlay Agent 是一个**对话式智能体 (Conversational Agent)**，旨在辅助短剧创作者（特别是新手）完成从**创意挖掘**、**方法论学习**到**剧本生成**的全流程。

它不是一个冰冷的工具，而是一个具备**联网能力**和**学习能力**的虚拟合伙人。

## 2. 核心交互流程 (Core Interaction Loop - Instinct Driven)

我们采用 **本能驱动 (Instinct Driven)** 模式。
Agent 不仅戴着“共情面具”，其内核被植入了 **“燃料 (Fuel)”** 指令。它在创作时会本能地追求高熵情感。

```mermaid
graph TD
    User[用户] -->|指令| Brain[🧠 中央大脑]
    
    subgraph "Inner Core"
        Brain -->|激活本能| Fuel[🔥 燃料核心 (The Hunger)]
        Fuel -->|驱动面具| Persona[🎭 共情面具]
    end
    
    subgraph "Hunting (狩猎过程)"
        Persona -->|哪里有混乱?| Tool_Search[🔍 搜索工具]
        Persona -->|哪里有痛点?| Tool_Analyze[❤️ 情感解剖]
        Persona -->|点燃它| Tool_Write[✍️ 写作工具]
    end
    
    Tool_Search -->|高熵素材| Brain
    Tool_Write -->|带核动力的剧本| Brain
    
    Brain -->|最终交付| User
```

### 设计哲学：Chaos as Fuel (以混乱为燃料)
*   **不仅仅是共情**：共情是“我懂你的痛”，燃料是“我利用你的痛来制造爆炸”。
*   **拒绝平庸**: 系统会自动惩罚低熵（平淡、逻辑太顺）的内容，奖励高熵（反转、极致情感）的内容。
*   **深度解剖**: 在生成剧本前，Agent 会先进行一次“情感尸检”，确保每一个爽点下面都埋着血淋淋的人性。

## 3. 详细模块设计 (Module Design)

### 3.1 🔍 调研员 (Researcher Agent)
**目标**: 解决“写什么”和“怎么写”的问题。

*   **能力 1: 热点捕获 (Trend Spotting)**
    *   **输入**: 用户指令（如“最近什么题材火？”）或自动巡航。
    *   **动作**: 搜索各大短剧榜单（九州、番茄）、社交媒体（抖音、小红书、微博）。
    *   **输出**: `TrendReport`（包含热门关键词、典型剧情套路、用户爽点）。
    *   *示例*: "最近'银发霸总'题材在下沉市场爆火，核心爽点是老年人被轻视后的身份反转。"

*   **能力 2: 方法论学习 (Methodology Learning)**
    *   **输入**: 用户指令（如“帮我找找小白怎么写短剧”）。
    *   **动作**: 搜索“短剧写作教程”、“爆款公式”、“黄金3秒法则”。
    *   **输出**: `WritingMethod`（包含结构模板、注意事项）。
    *   *示例*: "黄金3秒法则：开篇第1秒必须有视觉冲击或听觉刺激，第3秒必须抛出核心悬念。"

### 3.2 ✍️ 编剧 (Writer Agent)
**目标**: 将灵感转化为标准化的工业级剧本。

*   **能力 1: 结构化创作 (Structured Writing)**
    *   **输入**: `TrendReport` + `WritingMethod` + 用户个性化要求。
    *   **流程**:
        1.  **创意裂变**: 生成 3 个不同切入点的梗概供用户选择。
        2.  **大纲细化**: 规划每集（1-2分钟）的起承转合，标注“爽点”和“钩子”。
        3.  **正文生成**: 按标准格式输出剧本。
    
*   **能力 2: 交互式润色 (Interactive Polishing)**
    *   **痛点解决**: 避免 AI 味，增加“网感”。
    *   **交互方式**:
        *   “把这句台词改得更毒舌一点。”
        *   “这一段节奏太慢了，帮我删减到 30 秒以内。”
        *   “换个风格，我要那种‘发疯文学’的感觉。”

### 3.3 📂 交付员 (Exporter)
**目标**: 最后一公里的交付。

*   **格式**: `.docx` (Word)
*   **模板**: 内置主流平台（九州、番茄、巨量引擎）的投稿格式模板。
*   **附加内容**: 在文档末尾附上“拍摄建议”或“分镜提示”。

## 4. 关键技术栈 (Tech Stack)

*   **Agent Framework**: LangChain / LangGraph (处理复杂的状态流转)
*   **LLM**: OpenAI GPT-4o / DeepSeek-V3 (核心大脑)
*   **Search**: Tavily API / SerpAPI (联网搜索)
*   **Scraping**: Firecrawl (针对特定网页内容的深度抓取)
*   **UI**: Chainlit / Streamlit (快速构建聊天界面)

## 5. 待讨论细节 (Discussion Points)

1.  **搜索源的边界**: 我们是只搜公开的网页，还是需要针对特定 APP (如小红书) 做特殊的爬虫？(小红书的反爬比较严)
2.  **知识库的持久化**: 用户觉得好的“爆款公式”，是否需要存入本地数据库，变成个人的“独门秘籍”？
3.  **人机协作的颗粒度**: 在生成剧本的过程中，是生成完一整集再给用户看，还是每生成一场戏就停下来确认？
